(()=>{"use strict";class t extends HTMLElement{get_root_child(){for(this.t_e=this;0!=this.traverse_child(this.t_e);)this.traverse_child(this.t_e);return this.t_e}traverse_child(t){var e=t.children;return!!e.length&&(this.t_e=e[0],e[0])}getModifiers(){}resizeComponent(t){var e,i,n=this.tagName.toLowerCase(),s=window.VM.global_el_division,o=this.parentElement.classList.contains("sidescroller-content")?window.VM.main_content_div.offsetWidth:this.parentElement.offsetWidth,a=this.hasAttribute("nomargin")?0:parseInt(getComputedStyle(document.documentElement).getPropertyValue("--global-margin").split("px")[0]),r=o/s,l=this.hasAttribute("width")?parseInt(this.getAttribute("width")):12,c=t?l*r-a-a/t:l*r-a-a/1;this.style.width=`${c}px`,this.style.float="left",this.style.position="relative",this.style.display="block",this.hasAttribute("image")&&(this.style.backgroundImage=`url(${this.getAttribute("image")})`,this.style["background-size"]=`${c}px ${c}px`,"card-item"==n&&(this.style.height=`${this.getBoundingClientRect().width}px`)),"pie-chart"==n&&this.chartify(this.data),this.is_square&&(this.style.height=`${this.getBoundingClientRect().width}px`),this.offsetWidth<=80&&"dropdown"!==this.parentElement.parentElement.getAttribute("type")&&("dropdown"==this.getAttribute("type")&&(e=this.button_text,i=this.button_icon),e=this.getElementsByTagName("p")[0],i=this.getElementsByTagName("span")[0],e&&i&&(e.style["font-size"]="15px",e.style.display="none",this.style.paddingLeft="0",i.style.position="absolute",i.style.marginLeft="50%",i.style.left="-8px",this.division>=5&&(e.style["font-size"]="11px")))}g_rows(){var t=this.getElementsByClassName("global-resize"),e=[];for(var i in t)console.log(t[i]),e.push()}async get_rows(t){return new Promise((e=>{for(var i=this.getElementsByClassName("global-resize"),n=[],s=[],o=[],a=0,r=0;r<i.length;r++){var l=i[r];r==i.length-1&&(o.forEach((t=>{t.get_rows(!1).then((t=>{n.push(...t)}))})),e(n)),l.getElementsByClassName("global-resize").length>0&&0!=t&&o.push(l),-1==o.indexOf(l.parentElement)&&(a+=l.hasAttribute("width")?Number(l.getAttribute("width")):12,s.push(l)),a>=window.VM.global_el_division&&(n.push(s),s=[],a=0)}}))}resizeComponents(t){if(this.row_map){if(1==t)return this.row_map=void 0,void this.resizeComponents();this.row_map.forEach((t=>{t.forEach((e=>{e.resizeComponent(t.length)}))}))}else this.get_rows().then((t=>{this.row_map=t,t.forEach((t=>{t.forEach((e=>{e.resizeComponent(t.length)}))}))}))}setHTML(t){return"string"==typeof t&&(this.innerHTML=t),"object"==typeof t&&this.append(t),this}}window.customElements.define("menu-bar-bottom",class extends t{constructor(){super()}connectedCallback(){window.DP.on("API_LOAD",(()=>{this.item_count=0,this.classList.add("menu-bar-bottom")}))}add_item(t,e){this.item_count++;var i=document.createElement("div"),n=document.createElement("span");i.classList.add("header-center-button-container"),n.classList.add("header-center-button","material-icons"),n.innerText=t,i.onclick=()=>{window.history.pushState("","",e)},i.append(n),this.append(i);for(var s=0;s<this.item_count;s++)this.getElementsByTagName("div")[s].style.width=`calc(100% / ${this.item_count})`}}),window.customElements.define("menu-bar-top",class extends t{static get observedAttributes(){return["title"]}constructor(){super()}connectedCallback(){this.title=this.getAttribute("title"),this.init()}attributeChangedCallback(t,e,i){"title"==t&&this.init()}init(){this.style.width="100%",this.style.height="60px",this.style.display="block",this.back_button=window.Builder.createElement("custom-input",{type:"button",icon:"arrow_back_ios",width:"2",blank:!0},{marginTop:"12.5px"}),this.title_el=window.Builder.createElement("custom-text",{text:this.title,width:"8",align:"center",color:"var(--theme-text-primary-color)"},{height:"60px",lineHeight:"60px"}),this.search_button=window.Builder.createElement("custom-input",{type:"button",icon:"search",width:"2",blank:!0},{marginTop:"12.5px"}),this.search_textbox=window.Builder.createElement("custom-input",{type:"text",placeholder:"Search Anything...",width:"10",blank:!0},{marginTop:"12.5px"}),this.back_button.innerHTML="arrow_back_ios",this.search_button.innerHTML="search",this.append_state("title")}append_state(t){this.innerHTML="","search"==t&&(this.append(this.back_button,this.search_textbox),this.search_textbox.focus(),this.search_textbox.onkeydown=t=>{},this.back_button.onclick=()=>{this.append_state("title")}),"title"==t&&(this.append(this.back_button,this.title_el,this.search_button),this.back_button.onclick=()=>{window.history.back()},this.search_button.onclick=()=>{this.append_state("search")}),this.resizeComponents(!0)}});class e extends HTMLElement{constructor(){super()}connectedCallback(){this.innerHTML=""}}window.customElements.define("main-content",e);class i extends HTMLElement{constructor(){super(),this.initialHTML='<div id="loading"></div>'}connectedCallback(){this.classList.add("loading-spinner"),window.loadingSpinner=this,this.innerHTML=this.initialHTML}hide(){this.innerHTML=""}show(){this.innerHTML=this.initialHTML}}window.customElements.define("loading-spinner",i),window.customElements.define("side-scroller",class extends t{constructor(){super(),this.classList.add("sidescroller"),this.initialHTML='\n                            <div class="sidescroller-content">\n                            </div>\n                            '}connectedCallback(){var t=this.innerHTML;this.innerHTML=this.initialHTML,this.root_el=this.get_root_child(),this.root_el.innerHTML=t,setTimeout((()=>{for(var t=this.root_el.children,e=0,i=0;i<t.length;i++)e+=t[i].getBoundingClientRect().width,i==t.length-1&&(this.getElementsByClassName("sidescroller-content")[0].style.width=`calc(${e}px + calc(${t.length} * var(--global-margin)))`)}),50),this.addEventListener("wheel",(t=>{t.preventDefault(),this.scrollLeft+=t.deltaY}))}}),window.customElements.define("card-item",class extends t{static get observedAttributes(){return["variant"]}constructor(){super()}connectedCallback(){this.classList.add("global-resize"),this.width=this.getAttribute("width"),this.secondary=this.getAttribute("secondary"),this.variant=this.getAttribute("variant"),this.has_image=!!this.hasAttribute("image"),this.is_blank=!!this.hasAttribute("blank"),this.is_square=!!this.hasAttribute("square"),this.init()}init(){this.clasify()}clasify(){var t=["card","card-2","icon-card"];this.variant?this.variant_class=t[parseInt(this.variant)]:this.variant_class=t[0],this.is_blank&&(this.style.background="transparent",this.style.borderRadius=0,this.style.paddingTop=0),this.classList.add(this.variant_class)}attributeChangedCallback(t,e,i){"variant"==t&&this.clasify()}});class n extends HTMLElement{constructor(){super(),this.icon=this.getAttribute("icon"),this.button_color_classes={delete:"red"}}connectedCallback(){this.innerHTML=`<span class="material-icons icon-button ${this.button_color_classes[this.icon]}">\n                                ${this.icon}\n                            </span>`}}window.customElements.define("icon-button",n),window.customElements.define("grid-container",class extends t{connectedCallback(){this.classList.add("grid-container");var t=this.innerHTML;this.innerHTML="",this.root_el=this.get_root_child(),this.root_el.innerHTML=t}}),window.customElements.define("image-slider",class extends t{constructor(){super(),this.initialHTML='\n                        <div class="images">\n                        </div>\n                    '}connectedCallback(){this.classList.add("image-slider");var t=this.innerHTML;this.innerHTML=this.initialHTML,this.root_el=this.get_root_child(),this.root_el.innerHTML=t;var e=this.getElementsByTagName("div")[0];console.log(e)}}),window.customElements.define("list-item",class extends t{constructor(){super()}connectedCallback(){this.classList.add("list-item","global-resize"),this.setAttribute("nomargin",!0),this.icon=this.getAttribute("icon"),this.text=this.getAttribute("text"),this.font_size=this.hasAttribute("font-size")?this.getAttribute("font-size"):20,this.secondary_font_size=this.hasAttribute("secondary-font-size")?this.getAttribute("secondary-font-size"):15,this.icon_color=this.hasAttribute("icon-color")?this.getAttribute("icon-color"):"var(--theme-primary-color)",this.style.width=this.parentElement.offsetWidth+"px",this.style.display="block";var t=this.hasAttribute("icon")?this.getAttribute("icon"):"info",e=this.hasAttribute("icon_color")?this.getAttribute("icon_color"):"var(--theme-primary-color)",i=t.includes("fa-")?this._fontawesome_icon(t):this._material_icon(t),n=this.hasAttribute("text")?this.getAttribute("text"):"",s=this._button_text_el(n),o=this.hasAttribute("text_color")?this.getAttribute("text_color"):"var(--theme-text-primary-color)",a=this.hasAttribute("right_text")?this.getAttribute("right_text"):"",r=this._button_right_text_el(a),l=this.hasAttribute("right_text_color")?this.getAttribute("right_text_color"):"";s.style.color=o,i.style.color=e,r.style.color=l,this.append(i,s,r)}_material_icon(t,e){var i=document.createElement("card-item");return i.setAttribute("width",2),i.setAttribute("blank",!0),i.classList.add("material-icons"),i.textContent=t,i}_fontawesome_icon(t,e){document.createElement("i").classList.add(t)}_button_text_el(t){var e=document.createElement("card-item");return e.setAttribute("width",10),e.setAttribute("blank",!0),e.style.padding="0px",e.innerHTML=`<p style="text-align:center; padding:0; margin:0;">${t}</p>`,e}_button_right_text_el(t){var e=document.createElement("b");return e.style.position="absolute",e.style.right="var(--global-margin)",e.style.top="var(--global-margin)",e.textContent=t,e}get_max_height(){for(var t=0,e=this.getElementsByTagName("card-item"),i=0;i<e.length;i++){var n=e[i].offsetHeight;if(t<n&&(t=n),i==e.length-1)return t}}}),window.customElements.define("post-card",class extends t{static get observedAttributes(){return["content","primary"]}constructor(){super()}connectedCallback(){this.classList.add("post-card"),this.type=this.getAttribute("type"),this.content=`<h1>${this.getAttribute("content")}</h1>`,this.author_public_uniqid=this.getAttribute("author_public_uniqid"),this.attachments=[],this.update()}update(){window.API2.get_user(this.author_public_uniqid).then((t=>{this.post_html=`  <post-card-header username="${t.username}" image_url="https://via.placeholder.com/150"></post-card-header>\n                                <textarea rows="11" placeholder="Comment"></textarea>\n                                <custom-button icon="add" text="Post" style="float:unset; bottom:10px;"></custom-button>`,"post"==this.type?this._HTML=this.post_html:this._HTML=`  <post-card-header username="${t.username}" image_url="https://via.placeholder.com/150"></post-card-header>\n                                    ${this.content}\n                                <post-card-footer likes="" comments=""></post-card-footer>`,this.innerHTML=this._HTML,this.post_card_header=this.getElementsByTagName("post-card-header")[0],this.post_card_footer=this.getElementsByTagName("post-card-footer")[0],this.post_card_footer.like_button.onclick=()=>{},this.post_card_footer.comment_button.onclick=()=>{this.innerHTML=this.post_html}}))}attributeChangedCallback(t,e,i){console.log(t),this.update()}});class s extends t{constructor(){super()}connectedCallback(){this.classList.add("context-menu"),this.style="display:none;position:absolute; width:150px; height:auto; background:var(--theme-card-color); overflow:hidden; border-radius:var(--global-border-radius);z-index:99;",window.onclick=t=>{var e=!1;for(var i in console.log(t),t.path)"#document"!=String(t.path[i].nodeName)&&"undefined"!=String(t.path[i].nodeName)&&"context-menu"==t.path[i].tagName.toLowerCase()&&(e=!0);0==e&&this.hide()}}destroy(){this.innerHTML=""}hide(){this.style.display="none",this.destroy()}show(t,e,i){this.hide(),setTimeout((()=>{this.style.left=`${t}px`,this.style.top=`${e}px`,this.style.display="block",this.append(i),this.resizeComponents(!0)}),100)}}window.customElements.define("context-menu",s),window.customElements.define("code-format",class extends t{constructor(){super()}connectedCallback(){this.text_content=String(this.innerHTML),console.log(this.text_content),this.innerText=this.text_content,this.classList.add("code-format")}});class o extends t{}window.customElements.define("music-player",class extends o{constructor(){super()}connectedCallback(){this.classList.add("music-player"),this.innerHTML='\n                            <span class="material-icons">\n                                skip_previous\n                            </span>\n                            <span class="material-icons">\n                                play_arrow\n                            </span>\n                            <span class="material-icons">\n                                fast_forward\n                            </span>\n                            <slider-input></slider-input>\n                            '}}),window.customElements.define("slider-input",class extends t{constructor(){super()}connectedCallback(){this.classList.add("slider-input"),this.innerHTML='\n                            <input type="range" min="1" max="100" value="50">\n                            '}}),window.customElements.define("sql-editor",class extends t{constructor(){super()}connectedCallback(){this.classList.add("sql-editor"),this.innerHTML='<card-item variant="1">\n                            <div class="line-number-container">\n                                <p>1</p>\n                                <p>2</p>\n                            </div>\n                            <div class="textarea-container">\n                                <textarea rows="6"></textarea>\n                            </div>\n                         </card-item>\n                         </br>\n                         <custom-button division="2" icon="play_arrow" text="Run"></custom-button>\n                         <custom-button division="2" icon="restart_alt" text="Reset"></custom-button>\n                         </br>\n                         </br>\n                         <card-item variant="1" class="output">\n                            \n                         </card-item>\n                         ',this.line_counter=this.getElementsByClassName("line-number-container")[0],this.sql_textarea=this.getElementsByTagName("textarea")[0],this.run_button=this.getElementsByTagName("custom-button")[0],this.reset_button=this.getElementsByTagName("custom-button")[1],this.output_card=this.getElementsByTagName("card-item")[1],this.reset_button.onclick=()=>{this.sql_textarea.value="",this.update_line_count(),this.output_card.innerHTML=""},this.run_button.onclick=()=>{this.output_card.innerHTML="";var t=this.sql_textarea.value;window.API2.send_sql(t).then((t=>{t.success&&this.construct_table(t.success)}))},this.update_line_count()}update_line_count(){this.line_counter.innerHTML="",this.sql_textarea.oninput=()=>{this.update_line_count()};for(var t=this.sql_textarea.value.split(/\r|\r\n|\n/).length,e=0;e<t;e++)this.line_counter.innerHTML+=`<p>${e+1}</p>`}construct_table_head(t,e){}construct_table(t){console.log(t);var e=Object.keys(t[0]),i=document.createElement("table"),n=i.insertRow();e.forEach((t=>{n.insertCell().innerHTML+=`<b class="theme-primary-color">${t}</b>`}));for(var s=0;s<t.length;s++){var o=i.insertRow();for(var a in console.log(t[s]),t[0])console.log(t[s][a]),o.insertCell().appendChild(document.createTextNode(t[s][a]))}this.output_card.append(i)}}),String.prototype.insert=function(t,e){return t>0?this.substring(0,t)+e+this.substr(t):e+this},window.customElements.define("custom-calculator",class extends t{constructor(){super()}connectedCallback(){for(var t in this.buttons={_AC:{onclick:()=>{this.calculator_output.value=""}},_rad:{onclick:t=>{this.calc_mode_toggle(t)}},"_%":{onclick:()=>{this.calculator_output.value+=" % "}},"_/":{onclick:()=>{this.calculator_output.value+=" / "}},_7:{onclick:()=>{this.calculator_output.value+="7"}},_8:{onclick:()=>{this.calculator_output.value+="8"}},_9:{onclick:()=>{this.calculator_output.value+="9"}},"_*":{onclick:()=>{this.calculator_output.value+=" * "}},_4:{onclick:()=>{this.calculator_output.value+="4"}},_5:{onclick:()=>{this.calculator_output.value+="5"}},_6:{onclick:()=>{this.calculator_output.value+="6"}},"_-":{onclick:()=>{this.calculator_output.value+=" - "}},_1:{onclick:()=>{this.calculator_output.value+="1"}},_2:{onclick:()=>{this.calculator_output.value+="2"}},_3:{onclick:()=>{this.calculator_output.value+="3"}},"_+":{onclick:()=>{this.calculator_output.value+=" + "}},_0:{onclick:()=>{this.calculator_output.value+="0"}},"_.":{onclick:()=>{this.calculator_output.value+="."}},"_=":{onclick:()=>{var t=this.calculator_output.value.toLowerCase(),e=t.split("resin(").join("asin(");"deg"==this.calc_mode&&(e=e.replace(/\d+(?:\.\d+)?/g,(t=>`(${t} deg )`))),console.log(e),window.API2.evaluate(e).then((e=>{e.result&&(this.calculator_history.innerHTML+=`<div class="history-item"><p class="primary">${t}</p><p class="secondary">${e.result}</p><p class="calculator-mode">${this.calc_mode}</p></div><hr>`,localStorage.setItem(t,[e.result,this.calc_mode]))}))},class:"double"}},this.calc_mode="rad",this.innerHTML='<input id="calculator-output" class="calculator-output" type="text"/>\n                            <div id="calculator" class="calculator">\n\n                            </div>\n                            <div id="calculator-history" class="calculator-history">\n                            </div>\n                            ',this.calculator=document.getElementById("calculator"),this.calculator_output=document.getElementById("calculator-output"),this.calculator_history=document.getElementById("calculator-history"),this.buttons){var e=document.createElement("div");e.classList.add("calculator-btn"),this.buttons[t].class&&e.classList.add(this.buttons[t].class),e.onclick=this.buttons[t].onclick,e.innerHTML=`<p>${t.slice(1)}</p>`,this.calculator.appendChild(e)}}calc_mode_toggle(t){"deg"==this.calc_mode?this.calc_mode="rad":this.calc_mode="deg",t.path[0].innerHTML=this.calc_mode}grab_numbers_from_string(t){return t.match(/\d+/g)}is_numeric(t){return/^\d+$/.test(t)}});var a=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"];class r{constructor(t){var e=String(t);this._day=e.slice(0,3),this._day_num=Number(e.slice(8,10)),this._month=e.slice(4,7).toLowerCase(),this._month_num=Number(a.indexOf(this.month)+1),this._year=Number(e.slice(11,15)),this._min=Number(e.slice(19,21)),this._hour=Number(e.slice(16,18))}set day(t){this._day=Number(t)}get day(){return this._day}set day_num(t){this._day_num=Number(t),console.log(this.date_string(t,this._month_num,this._year)),this._day=String(["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date(this.date_string(t,this._month_num,this._year)).getDay()])}get day_num(){return this._day_num}set month(t){this._month=String(t).toLowerCase(),this._month_num=Number(a.indexOf(this._month)+1)}get month(){return this._month}set month_num(t){this._month_num=Number(t),this._month=String(a[this._month_num]).toLowerCase()}get month_num(){return this._month_num}set year(t){this._year=Number(t)}get year(){return this._year}set min(t){this._min=Number(t)}get min(){return this._min}set hour(t){this._hour=Number(t)}get hour(){return this._hour}date_string(t,e,i){return`${e}/${t}/${i}`}}window.customElements.define("custom-calendar",class extends t{constructor(){super()}connectedCallback(){this.classList.add("calendar"),this.week_days=["sun","mon","tue","wed","thu","fri","sat"],this.selected_date=new r(new Date),this.cal_data=this.construct_initial_date_array(),this.innerHTML='\n                        <div class="calendar-controls">\n                            <span class="material-icons prev-month">navigate_before</span>\n                            <p class="title"></p>\n                            <span class="material-icons next-month">navigate_next</span>\n                        </div>\n                        <div class="calendar-cols">\n                        </div>\n                        <div class="day-container">\n                        </div>\n                        <div class="date-info-container">\n                        </div>\n                        ',this.calendar_title=this.getElementsByClassName("title")[0],this.calendar_day_container=this.getElementsByClassName("day-container")[0],this.calendar_cols=this.getElementsByClassName("calendar-cols")[0],this.next_button=this.getElementsByClassName("next-month")[0],this.prev_button=this.getElementsByClassName("prev-month")[0],this.date_info_container=this.getElementsByClassName("date-info-container")[0],this.open_calendar(),this.next_button.onclick=()=>{this.selected_date.month_num=this.selected_date.month_num+1>11?0:this.selected_date.month_num+1,this.open_calendar(this.selected_date.month),this.fire_month_change_event()},this.prev_button.onclick=()=>{this.selected_date.month_num=this.selected_date.month_num-1<0?11:this.selected_date.month_num-1,this.open_calendar(this.selected_date.month),this.fire_month_change_event()}}open_calendar(t){var e=t||this.selected_date.month;this.construct_calendar(e)}highlight_dates(t,e){var i=e||this.selected_date.month;return new Promise((async e=>{if(t[i]){var n=t[i];for(var s in this.cal_data[i]=n,n){var o=Number(s),a=String(n[s].color);this.highlight_day(o,a,i)}return e()}}))}fire_month_change_event(){var t=document.createEvent("HTMLEvents");t.initEvent("monthChange",!0,!0),t.eventName="monthChange",this.dispatchEvent(t)}construct_calendar(t){return new Promise((async e=>{var i=this.selected_date.month,n=a.indexOf(i);t&&(i=t,n=a.indexOf(i)+1),this.set_calendar_title(i),this.append_calendar_days(n,2022).then((t=>e(t)))}))}append_calendar_days(t,e){return new Promise((async i=>{this.first_day_offset=this.get_first_day_offset(t-1),this.days_in_month=Number(new Date(e,t,0).getDate()),this.calendar_cols.innerHTML="",this.calendar_day_container.innerHTML="";for(var n=0;n<this.week_days.length;n++)this.calendar_cols.innerHTML+=`<p>${this.week_days[n]}</p>`;for(n=0;n<this.first_day_offset;n++)this.append_day();for(n=1;n<=this.days_in_month;n++)this.append_day(n);return i(this.calendar_day_container.children)}))}set_calendar_title(t){this.calendar_title.innerHTML=t}get_first_day_offset(t){var e=new Date(this.selected_date.year,t,1).toString().slice(0,3).toLowerCase();return this.week_days.indexOf(e)}prepend_day(){var t=document.createElement("div");t.classList.add("calendar-day","secondary"),this.calendar_day_container.prepend(t)}append_day(t){var e=document.createElement("div");t?(e.classList.add("calendar-day"),e.innerHTML=`<p>${t}</p>`):e.classList.add("calendar-day","secondary"),this.calendar_day_container.append(e)}get_month(t){return a[t]}outline_day(t){var e=parseInt(t+this.first_day_offset-1);this.calendar_day_container.getElementsByClassName("calendar-day")[e].classList.add("outline")}highlight_day(t,e,i){i||(i=this.selected_date.month),this.cal_data[i][t]={color:e};var n=this.get_first_day_offset(a.indexOf(i)),s=parseInt(t+n-1);this.calendar_day_container.getElementsByClassName("calendar-day")[s].style.backgroundColor=e}clear_day_highlights(){for(var t=this.calendar_day_container.getElementsByClassName("calendar-day"),e=0;e<t.length;e++)t[e].style.backgroundColor=""}clear_day_highlight(t,e){var i=e||this.selected_date.month,n=this.get_first_day_offset(a.indexOf(i)),s=parseInt(t+n-1);this.calendar_day_container.getElementsByClassName("calendar-day")[s].style.backgroundColor=""}on_date_clicked(t){var e="ontouchstart"in window?"touchstart":"click";this.addEventListener(e,(e=>{var i=e.target.parentNode;"calendar-day"==i.className&&(this.selected_date.day_num=i.innerText,t(this.selected_date))}))}on_month_changed(t){this.addEventListener("monthChange",(()=>{t(this.selected_date)}))}toggle_highlight(t,e,i){var n=i||this.selected_date.month,s=this.calendar_day_container.getElementsByClassName("calendar-day")[t];"rgb(112, 111, 211)"!=window.getComputedStyle(s,null).getPropertyValue("background-color")?this.clear_day_highlight(t,n):this.highlight_day(t,e)}construct_initial_date_array(){return{jan:{},feb:{},mar:{},apr:{},may:{},jun:{},jul:{},aug:{},sep:{},oct:{},nov:{},dec:{}}}}),window.customElements.define("post-card-header",class extends t{constructor(){super()}connectedCallback(){this.classList.add("post-card-header"),this.username=this.getAttribute("username"),this.image_url=this.getAttribute("image_url"),this.innerHTML=`   \n                            <img src="${this.image_url}"></img>\n                            <p class="username">${this.username}</p>\n                            <trophy-chip></trophy-chip>\n                            `}}),window.customElements.define("post-card-footer",class extends t{constructor(){super()}connectedCallback(){this.classList.add("post-card-footer"),this.likes=this.getAttribute("likes"),this.comments=this.getAttribute("comments"),this.innerHTML='   <custom-button division="2" rel="true" icon="chat" text="Comments"></custom-button>\n                            <custom-button division="2" rel="true" icon="thumb_up" text="Like"></custom-button>',this.comment_button=this.getElementsByTagName("custom-button")[0],this.like_button=this.getElementsByTagName("custom-button")[1]}}),window.customElements.define("custom-input",class extends t{constructor(){super()}get value(){return this._value}set value(t){this._value=t,"dropdown"==this.type&&(this.button_text.textContent=t,event=document.createEvent("HTMLEvents"),event.initEvent("change",!0,!0),event.eventName="change",this.dispatchEvent(event)),"color"==this.type&&(this.getElementsByClassName("material-icons")[0].style.color=this.value),"slider"==this.type&&(this.getElementsByTagName("input")[0].value=t)}set icon(t){this._icon=t;var e=this.getElementsByTagName("span")[0];null!=e&&(e.innerHTML=t)}get icon(){return this._icon}set items(t){this._items=t,this._append_dropdown_items()}connectedCallback(){this.classList.add("global-resize"),this.type=this.getAttribute("type"),this.division=this.getAttribute("division"),this.image=this.getAttribute("image"),this.icon=this.getAttribute("icon"),this.text=this.getAttribute("text"),this.secondary=this.getAttribute("secondary"),this.variant=this.getAttribute("variant"),this.rows=this.getAttribute("rows"),this.toggle=this.hasAttribute("toggle"),this.width=this.getAttribute("width"),this.init()}attributeChangedCallback(t,e,i){}init(){this.type&&("text"==this.type?this._is_text():"button"==this.type?this._is_button():"textarea"==this.type?this._is_textarea():"dropdown"==this.type?this._is_dropdown():"password"==this.type?this._is_password():"color"==this.type?this._is_color():"slider"==this.type?this._is_slider():"upload"==this.type&&this._is_upload()),this.hasAttribute("blank")&&(this.style.backgroundColor="transparent")}_is_upload(){this.innerHTML=`  <input style="display:none;" type="file" id="file" class="inputfile"'>\n                            <label for="file">\n                                <div class="custom-button" style="width:100%; margin: 0px !important; cursor:pointer;">\n                                    <span class="material-icons">upload</span>\n                                    <p>${this.text}</p> \n                                </div>\n                            </label>`,this.style["margin-left"]="var(--global-margin)",this.style["margin-bottom"]="var(--global-margin)",this.onchange=t=>{console.log(t.target.files)}}_is_color(){this.classList.add("custom-dropdown-button"),this.innerHTML=`  <div class="custom-button" style="width:100%; margin: 0px !important; cursor:pointer;">\n                                <span class="material-icons">palette</span>\n                                <p>${this.text}</p> \n                            </div>\n                            <div class="color-picker-container"></div>`,this.color_picker_container=this.getElementsByClassName("color-picker-container")[0];var t=this.getElementsByClassName("custom-button")[0];window,t.onclick=()=>{this.color_picker_container.classList.toggle("opened"),this.color_picker_container.innerHTML='<card-item style="margin:0px; padding:0;" nomargin><canvas style="margin:var(--global-margin);"></canvas></card-item>',this.color_picker_container.style["box-shadow"]="5px 5px 5px var(--theme-background-color)";var t=this.getElementsByTagName("canvas")[0];t.getContext("2d"),this.resizeComponents(!0),t.width=this.getBoundingClientRect().width-20,t.height=this.getBoundingClientRect().width-20,this._render_color_map(t),this._setup_colorwheel_bindings(t)}}_is_text(){this.hasAttribute("number")&&(this.setAttribute("pattern","[0-9]*"),this.setAttribute("inputmode","numeric")),this.setAttribute("contenteditable","true"),this.classList.add("custom-text-input"),this.onkeydown=()=>{setTimeout((()=>{this.value=this.textContent}),200)},onfocus=this.style.webkitTransform="translate3d(0px,-10000px,0)",requestAnimationFrame(function(){this.style.webkitTransform=""}.bind(this))}_material_icon(t,e){var i=document.createElement("span");return i.classList.add("material-icons"),i.textContent=t,i}_fontawesome_icon(t,e){document.createElement("i").classList.add(t)}_button_text_el(t){var e=document.createElement("p");return e.textContent=t,e}_button_right_text_el(t){var e=document.createElement("b");return e.style.position="absolute",e.style.right="var(--global-margin)",e.style.top="var(--global-margin)",e.textContent=t,e}_is_button(){var t=this.hasAttribute("icon")?this.getAttribute("icon"):"info",e=this.hasAttribute("icon_color")?this.getAttribute("icon_color"):"var(--theme-primary-color)",i=t.includes("fa-")?this._fontawesome_icon(t):this._material_icon(t);i.style.overflow="hidden";var n=this.hasAttribute("text")?this.getAttribute("text"):"",s=this._button_text_el(n),o=this.hasAttribute("text_color")?this.getAttribute("text_color"):"var(--theme-text-primary-color)",a=this.hasAttribute("right_text")?this.getAttribute("right_text"):"",r=this._button_right_text_el(a),l=this.hasAttribute("right_text_color")?this.getAttribute("right_text_color"):"";s.style.color=o,i.style.color=e,r.style.color=l,this.classList.add("custom-button"),this.innerHTML="",this.append(i,s,r),this.addEventListener("click",(()=>{this.classList.toggle("clicked-animation"),this.toggle||setTimeout((()=>{this.classList.toggle("clicked-animation")}),200)}))}_is_textarea(){this.classList.add("custom-text-input"),this.setAttribute("contenteditable","true"),this.rows&&(this.style.height=16*this.rows+20+"px"),this.onkeydown=()=>{setTimeout((()=>{this.value=this.textContent}),200)}}_is_dropdown(){this.icon&&this.text&&(this.classList.add("custom-dropdown-button"),this.innerHTML=`  <div class="custom-button" style="width:100%; margin: 0px !important;">\n                                    <span class="material-icons">${this.icon}</span>\n                                    <p>${this.text}</p> \n                                </div>\n                                <div class="custom-dropdown-button-content"></div>`,this.button=this.getElementsByTagName("div")[0],this.button_text=this.button.getElementsByTagName("p")[0],this.button_icon=this.button.getElementsByTagName("span")[0],this.dropdown_content=this.getElementsByClassName("custom-dropdown-button-content")[0],this.dropdown_content.style.paddingTop="var(--global-padding)"),this.button.onclick=()=>{this.dropdown_content.classList.toggle("opened"),this.resizeComponents(!0)}}_is_password(){this.className="custom-text-input"}_is_slider(){this.classList.add("slider-input");var t=this.hasAttribute("min")?Number(this.getAttribute("min")):0,e=this.hasAttribute("max")?Number(this.getAttribute("max")):100;this.innerHTML=`<input type="range" min="${t}" max="${e}">`,this.input=this.getElementsByTagName("input")[0]}_append_dropdown_items(){if(this._items){for(var t=0;t<this._items.length;t++){var e=this._items[t],i=document.createElement("custom-input");i.setAttribute("type","button"),i.setAttribute("text",e),i.setAttribute("item_number",t),i.setAttribute("icon","info"),i.style.background="var(--theme-background-color)",i.onclick=t=>{this.value=this._items[t.currentTarget.getAttribute("item_number")],this.dropdown_content.classList.toggle("opened")},this.dropdown_content.append(i)}var n=this.dropdown_content.getElementsByTagName("custom-input");for(var s in n)"function"!=typeof(s=n[s])&&"number"!=typeof s&&(console.log("element"),console.log(s),s.resizeComponents(!0))}}_render_color_map(t){this._clear_canvas(t);var e=t.getContext("2d"),i=window.getComputedStyle(this).getPropertyValue("--theme-card-color"),n=t.width/2,s=2*Math.PI/360,o=1/n;e.clearRect(0,0,t.width,t.height);for(var a=0;a<360;a+=o){var r=a*s;e.strokeStyle="hsl("+a+", 100%, 50%)",e.beginPath(),e.moveTo(n,n),e.lineTo(n+n*Math.cos(r),n+n*Math.sin(r)),e.stroke()}e.fillStyle=i,e.beginPath(),e.arc(n,n,.8*n,0,2*Math.PI,!0),e.closePath(),e.fill()}_draw_middle_rainbow_square(t,e){for(var i=t.getContext("2d"),n=Math.floor((t.width-100)/2),s=Math.floor((t.height-100)/2),o=s;o<s+100;o++){var a=i.createLinearGradient(n,s,100,0);a.addColorStop(0,"hsl("+e+", 100%, "+(100-o)+"%)"),a.addColorStop(1,"hsl("+e+", 0%, "+(100-o)+"%)"),i.fillStyle=a,i.fillRect(n,o,100,1)}}_setup_colorwheel_bindings(t){var e=t.getContext("2d"),i=this,n="ontouchstart"in window?"touchstart":"click";t.addEventListener(n,(n=>{var s=n.touches?n.layerX:n.offsetX,o=n.touches?n.layerY:n.offsetY,a=e.getImageData(s,o,1,1).data;i.value=`rgba(${a[0]}, ${a[1]}, ${a[2]}, ${a[3]})`,i._render_color_map(t),i._render_color_map_mouse_circle(t,s,o),i.dispatchEvent(new Event("change"))}),!1)}_render_color_map_mouse_circle(t,e,i){var n=t.getContext("2d");n.strokeStyle="rgb(255, 255, 255)",n.lineWidth="2",n.beginPath(),n.arc(e,i,10,0,2*Math.PI,!0),n.closePath(),n.stroke()}_clear_canvas(t){var e=window.getComputedStyle(this).getPropertyValue("--theme-card-color"),i=t.getContext("2d");i.fillStyle=e,i.fillRect(0,0,t.width,t.height)}_on_change(t){"slider"==this.type?this.input.addEventListener("change",(()=>{t(this.input.value)})):this.addEventListener("change",(()=>{t(this.value)}))}}),window.customElements.define("pie-chart",class extends t{constructor(){super()}connectedCallback(){this.classList.add("pie-chart","global-resize"),this.innerHTML='  <canvas></canvas>\n                            <div class="legend"></div>',this.style.display="block",this.style.margin=this.hasAttribute("nomargin")?"0px":"var(--global-margin)",this.parentElement.style.paddingTop=0,this.colors=["#ff6b6b","#ff9f43","#feca57","#1dd1a1","#2e86de","#54a0ff","#5f27cd"],this.canvas=this.getElementsByTagName("canvas")[0],this.legend=this.getElementsByClassName("legend")[0],this.ctx=this.canvas.getContext("2d"),this.data=[]}chartify(t){this.used_colors=[];var e=0;for(var i in t)t[i].total,e==t.length&&this.drawPie(t,7),e++}randomColor(){var t=this.colors[Math.floor(Math.random()*this.colors.length)];return-1!=this.used_colors.indexOf(t)?this.randomColor():(this.used_colors.push(t),t)}drawPie(t,e){var i=this.hasAttribute("legend")?this.getBoundingClientRect().width-50:this.getBoundingClientRect().width,n=0;for(var s in this.half=i/2-1,this.canvas.width=i,this.canvas.height=i,t){var o,a=t[s],r=a.total/e*2*Math.PI;this.ctx.beginPath(),this.ctx.arc(this.half,this.half,this.half,n,n+r),n+=r,this.ctx.lineTo(this.half,this.half),o=a.shade?a.shade:this.randomColor(),this.ctx.fillStyle=o,this.ctx.fill(),this.hasAttribute("legend")&&(this.legend.innerHTML+=`<card-item width="2" style="height:20px; background:${o};"><p style="float:left; width:100%; text-align:center;">a</p></card-item>`)}}}),window.customElements.define("custom-text",class extends t{constructor(){super()}connectedCallback(){this.classList.add("global-resize"),this.innerHTML=this.getAttribute("text"),this.style.marginLeft="var(--global-margin)",this.style.float="left",this.style.textAlign=this.getAttribute("align"),this.style.color=this.getAttribute("color")}});class l extends t{constructor(){super()}connectedCallback(){this.width="800px",this.style.width=this.width,this.style.height="60px",this.style.background="blue",this.style.display="block",this.style.position="absolute",this.style.bottom="var(--global-margin)",this.style.left=`calc(calc(100% - ${this.width}) / 2)`,this.style.borderRadius="var(--global-border-radius)",this.style.background="var(--theme-card-color)"}}window.customElements.define("desktop-task-bar",l);class c extends t{constructor(){super()}connectedCallback(){this.width="100%",this.style.width=this.width,this.style.height="30px",this.style.background="blue",this.style.display="block",this.style.position="absolute",this.style.top="0px",this.style.left=`calc(calc(100% - ${this.width}) / 2)`,this.style.borderRadius="var(--global-border-radius)",this.style.background="var(--theme-card-color)"}}window.customElements.define("desktop-title-bar",c);class d extends t{constructor(t){super(t),this.props=t}connectedCallback(){console.log(this.props),this.style.position="absolute",this.x=void 0!==this.props.x?this.props.x:"0px",this.y=void 0!==this.props.y?this.props.y:"0px",this.width=void 0!==this.props.width?this.props.width:"400px",this.height=void 0!==this.props.height?this.props.height:"400px",this.html=void 0!==this.props.html?this.props.html:"Empty Window",this.background="var(--theme-card-color)",this.borderRadius="var(--global-border-radius)",this.text=void 0!==this.props.text?this.props.text:"New Window",this.title_bar=window.Builder.createElement("card-item",{nomargin:!0},{borderBottomRightRadius:"0px",borderBottomLeftRadius:"0px",padding:"0px",margin:"0px",background:"black",height:"25px"}),this.title_exit=window.Builder.createElement("span",{},{float:"right",height:"15px",width:"15px",margin:"5px",borderRadius:"7.5px",background:"red"}),this.title_maximize=window.Builder.createElement("span",{},{float:"right",height:"15px",width:"15px",margin:"5px",borderRadius:"7.5px",background:"yellow"}),this.title_minimize=window.Builder.createElement("span",{},{float:"right",height:"15px",width:"15px",margin:"5px",borderRadius:"7.5px",background:"green"}),this.title_text=window.Builder.createElement("span",{},{zIndex:"2",position:"absolute",width:"100%",height:"100%",marginTop:"5px",textAlign:"center",color:"var(--theme-text-primary-color)"}),this.title_text.innerHTML=this.text,this.window_content=window.Builder.createElement("card-item",{nomargin:!0},{margin:"0px",background:"transparent",height:`calc(100% - ${this.title_bar.getBoundingClientRect().height}px)`,padding:"0px"}),this.title_bar.append(this.title_exit,this.title_maximize,this.title_minimize,this.title_text),this.mouse_state=!1,window.addEventListener("mousedown",(t=>{this.mouse_state=!0})),window.addEventListener("mouseup",(t=>{this.mouse_state=!1})),this.title_bar.addEventListener("mousemove",(t=>{1==this.mouse_state&&this.set_position(t.clientX-50,t.clientY-12.5)})),window.addEventListener("mousemove",(t=>{var e=Number(this.x.split("px")[0]),i=Number(this.y.split("px")[0]),n=Number(this.width.split("px")[0]),s=Number(this.height.split("px")[0]),o=0;document.body.style.cursor="auto",this.get_corners(e,i,n,s).forEach((e=>{t.clientX>=e[0]-10&&t.clientX<=e[0]+10&&t.clientY>=e[1]-10&&t.clientY<=e[1]+10&&(0==o&&(document.body.style.cursor="nw-resize"),1==o&&(document.body.style.cursor="ne-resize"),2==o&&(document.body.style.cursor="se-resize"),3==o&&(document.body.style.cursor="sw-resize"),this.mouse_state),o++}))})),this.update(),this.append(this.title_bar,this.window_content),this.resizeComponents(!0)}update(){this.style.left=this.x,this.style.top=this.y,this.style.width=this.width,this.style.height=this.height,this.style.background=this.background,this.style.borderRadius=this.borderRadius,this.window_content.innerHTML=this.html,this.resizeComponents(!0)}set_position(t,e){this.x=`${t}px`,this.y=`${e}px`,this.update()}get_corners(t,e,i,n){return[[t,e],[t+i,e],[t+i,e+n],[t,e+n]]}}window.customElements.define("custom-window",d),window.customElements.define("settings-view",class extends o{constructor(){super()}connectedCallback(){this.classList.add("view"),this.innerHTML=` \n                                    <custom-input type="button" icon="info" text="Clear DB"></custom-input>\n                                    <custom-input type="button" icon="clear" text="Clear Script Cache" onclick="NCache._clear()"></custom-input>\n                                    <custom-input type="color" width="6" text="Primary Color"></custom-input>\n                                    <custom-input type="color" width="6" text="Secondary Color"></custom-input>\n                                    <custom-input type="button" icon="light_mode" text="Light Theme"></custom-input>\n                                    <custom-input type="button" icon="dark_mode" text="Dark Theme"></custom-input>\n                                    <custom-input type="slider" width="4" min="0" max="50" ></custom-input>\n                                    <custom-input type="slider" width="4" min="0" max="50" ></custom-input>\n                                    <custom-input type="slider" width="4" min="0" max="50" ></custom-input>\n                                    <card-item width="4" blank><p style="margin:0; margin-bottom:10px; width:100%; text-align:center;">Global Margin</p></card-item>\n                                    <card-item width="4" blank><p style="margin:0; margin-bottom:10px; width:100%; text-align:center;">Global Padding</p></card-item>\n                                    <card-item width="4" blank><p style="margin:0; margin-bottom:10px; width:100%; text-align:center;">Border Radius</p></card-item>\n                                    <card-item><p style="width:100%; text-align:center; margin:0; margin-bottom:10px;">App Version: <b style="color:var(--theme-primary-color);">${window.localStorage.getItem("_update_version")}</b></p></card-item>`,this.light_theme_button=this.getElementsByTagName("custom-input")[4],this.dark_theme_button=this.getElementsByTagName("custom-input")[5],this.margin_slider=this.getElementsByTagName("custom-input")[6],this.padding_slider=this.getElementsByTagName("custom-input")[7],this.border_radius_slider=this.getElementsByTagName("custom-input")[8],this.primary_color_picker=this.getElementsByTagName("custom-input")[2],this.secondary_color_picker=this.getElementsByTagName("custom-input")[3];var t=getComputedStyle(this).getPropertyValue("--global-margin"),e=getComputedStyle(this).getPropertyValue("--global-padding"),i=getComputedStyle(this).getPropertyValue("--global-border-radius");this.getElementsByTagName("card-item")[0].getElementsByTagName("p")[0].innerHTML=`Global Margin ${t}`,this.getElementsByTagName("card-item")[1].getElementsByTagName("p")[0].innerHTML=`Global Padding ${e}`,this.getElementsByTagName("card-item")[2].getElementsByTagName("p")[0].innerHTML=`Border Radius ${i}`,this.margin_slider.getElementsByTagName("input")[0].value=t.split("px")[0],this.padding_slider.getElementsByTagName("input")[0].value=e.split("px")[0],this.border_radius_slider.getElementsByTagName("input")[0].value=i.split("px")[0],this.light_theme_button.onclick=()=>{window.VM.set_theme_property("--theme-card-color","#b3b8bd"),window.VM.set_theme_property("--theme-background-color","white"),window.VM.set_theme_property("--theme-text-primary-color","#1f2122"),window.VM.set_theme_property("--theme-text-secondary-color","#1f2122")},this.dark_theme_button.onclick=()=>{window.VM.set_theme_property("--theme-card-color","#292d3e"),window.VM.set_theme_property("--theme-background-color","#212432"),window.VM.set_theme_property("--theme-text-primary-color","#E4E6EB"),window.VM.set_theme_property("--theme-text-secondary-color","#B0B3B8")},this.margin_slider._on_change((t=>{console.log(t),window.VM.set_theme_property("--global-margin",t+"px"),this.getElementsByTagName("card-item")[0].getElementsByTagName("p")[0].innerHTML=`Global Margin ${t}px`,window.VM.resize_components()})),this.padding_slider._on_change((t=>{console.log(t),window.VM.set_theme_property("--global-padding",t+"px"),this.getElementsByTagName("card-item")[1].getElementsByTagName("p")[0].innerHTML=`Global Padding ${t}px`,window.VM.resize_components()})),this.border_radius_slider._on_change((t=>{this.getElementsByTagName("card-item")[2].getElementsByTagName("p")[0].innerHTML=`Border Radius ${t}px`,window.VM.set_theme_property("--global-border-radius",t+"px")})),this.primary_color_picker._on_change((t=>{window.VM.set_theme_property("--theme-primary-color",t)})),this.secondary_color_picker._on_change((t=>{window.VM.set_theme_property("--theme-secondary-color",t)})),window.DP.dispatch("VIEW_LOAD")}}),window.customElements.define("savings-view",class extends o{constructor(){super()}connectedCallback(){this.classList.add("view"),this.make_view("monthly"),window.DP.dispatch("VIEW_LOAD")}make_view(t){this.innerHTML="",this.profile_dropdown=window.Builder.createElement("custom-input",{text:"Profile",type:"dropdown",icon:"info",width:"10"}),this.new_profile_button=window.Builder.createElement("custom-input",{text:"Add Profile",type:"button",icon:"add",width:"2"}),this.frequency_dropdown=window.Builder.createElement("custom-input",{text:t,type:"dropdown",icon:"info",width:"10"}),this.new_finance_button=window.Builder.createElement("custom-input",{text:"Add Finance Item",type:"button",icon:"add",width:"2"}),this.new_profile_button.onclick=()=>{window.history.pushState("","",`${window.location.href}/NewProfileItem`)},this.new_finance_button.onclick=()=>{window.history.pushState("","",`${window.location.href}/NewFinanceItem`)},this.frequency_dropdown._on_change((t=>{this.innerHTML="",this.make_view(t)})),this.append(this.profile_dropdown,this.new_profile_button,this.frequency_dropdown,this.new_finance_button),window.API2.get_db("profiles").find({},((t,e)=>{var i=[];e.forEach((t=>{i.push(t.name)})),this.profile_dropdown.items=i})),window.API2.get_db("finances").find({},((e,i)=>{this.append_finances_from_frequency(t,i).then((t=>{this.bar_graph_el=this.bar_graph(i),this.append(t,this.bar_graph_el),t.resizeComponents(!0),this.resizeComponents(!0),this.frequency_dropdown.items=["Daily","Weekly","Bi-Weekly","Monthly"]}))}))}append_finances_from_frequency(t,e){return new Promise((i=>{var n=window.Builder.createElement("card-item",{blank:!0,nomargin:!0},{padding:"0px",margin:"0px"});n.innerHTML="",this.calculate_from_normalized(this.normalize_finances(e),t).forEach((t=>{n.append(this.finance_detail_div(t))}));var s=this.get_balance(e),o=-1==Math.sign(s)?"#e3556c":"green",a=-1==Math.sign(s)?`-   $${String(s).split("-")[1]}`:`$${s}`,r=window.Builder.createElement("card-item",{blank:!0}),l=window.Builder.createElement("h1",{},{textAlign:"center",color:o});l.textContent=a,r.append(l),n.append(r),i(n)}))}finance_detail_div(t){var e="expense"===t.type?"-":"+",i="expense"===t.type?"#e3556c":"green",n=window.Builder.createElement("custom-input",{icon:"attach_money",type:"button",text:t.name,right_text:`${e}  $${t.amount}`,right_text_color:i});return n.onclick=()=>{window.history.pushState("","",`${window.location.href}/NewFinanceItem/${t._id}`)},n}normalize_finances(t){var e=[];return t.forEach((t=>{var i=t.frequency.toLowerCase();"bi-weekly"==i&&(t.amount=2*t.amount),"weekly"==i&&(t.amount=4*t.amount),"daily"==i&&(t.amount=30*t.amount),e.push(t)})),e}calculate_from_normalized(t,e){var i=[];return t.forEach((t=>{var n=e.toLowerCase();"bi-weekly"==n&&(t.amount=Math.ceil(t.amount/2)),"weekly"==n&&(t.amount=Math.ceil(t.amount/4)),"daily"==n&&(t.amount=Math.ceil(t.amount/30)),i.push(t)})),i}get_income(t){var e=0;return t.forEach((t=>{var i=Number(t.amount);isNaN(i)||"expense"===t.type||(e+=i)})),e}get_balance(t){var e=0;return t.forEach((t=>{var i=Number(t.amount);isNaN(i)||"income"===t.type||(e-=i),isNaN(i)||"expense"===t.type||(e+=i)})),e}normalize(t,e){return t/e*this.getBoundingClientRect().width/e}_normalize(t,e,i){return(t-e)/(i-e)}randomColor(t,e){var i=t[Math.floor(Math.random()*t.length)];return-1!=e.indexOf(i)?this.randomColor(t,e):(e.push(i),[i,e])}bar_graph(t){var e=this.get_income(t),i=["#e3556c","#86424c","#da4453","#ff5252","#863c32","#77302E"],n=window.Builder.createElement("card-item",{},{padding:"0px"});return n.style.height="40px",t.forEach((s=>{if("income"==s.type){var o=100*this.get_balance(t)/e,a="#4caf50";n.append(window.Builder.createElement("div",{},{width:`${o}%`,height:"40px",background:a,display:"inline-block",float:"right"}))}else o=100*s.amount/e,a=i[Math.floor(Math.random()*i.length)],n.append(window.Builder.createElement("div",{},{width:`${o}%`,height:"40px",background:a,display:"inline-block"}))})),n}}),window.customElements.define("calendar-view",class extends o{constructor(){super()}connectedCallback(){this.classList.add("view"),this.innerHTML="<custom-calendar></custom-calendar>",window.DP.dispatch("VIEW_LOAD")}}),window.customElements.define("set-goals-view",class extends o{constructor(){super()}connectedCallback(){this.classList.add("view"),this.innerHTML=`   <p>How much do you want to save monthly?</p>\n                                        <custom-input id="saving" type="text"></custom-input>\n                                        <custom-input id="frequency" type="dropdown" icon="info" text="Frequency"></custom-input>\n                                        <card-item id="expenses"></card-item>\n                                        <custom-input type="button" text="Add Finance Item" icon="add" onclick="window.history.pushState('','','${window.location.href}/NewFinanceItem')"></custom-input>\n                                        <p id="income"></p>\n                                        `,this.append(this.bar_graph());var t=document.getElementById("frequency");t.items=["Daily","Weekly","Bi-Weekly","Monthly"],t._on_change((t=>{this.append_finances_from_frequency(t)})),this.append_finances_from_frequency("monthly"),window.DP.dispatch("VIEW_LOAD")}append_finances_from_frequency(t){var e=document.getElementById("expenses");e.innerHTML="",this.calculate_finances(t).then((t=>{t.forEach((t=>{e.append(this.finance_detail_div(t))})),e.resizeComponents(!0)}))}finance_detail_div(t){var e=document.createElement("custom-input"),i="expense"===t.type?"-":"+",n="expense"===t.type?"#e3556c":"green";return e.setAttribute("icon","attach_money"),e.setAttribute("type","button"),e.setAttribute("text",t.name),e.setAttribute("right_text",`${i}  $${t.amount}`),e.setAttribute("right_text_color",n),e.style.background="var(--theme-background-color)",e.onclick=()=>{window.history.pushState("","",`${window.location.href}/NewFinanceItem/${t._id}`)},e}normalize_finances(t){var e=[];return t.forEach((t=>{var i=t.frequency.toLowerCase();"bi-weekly"==i&&(t.amount=2*t.amount),"weekly"==i&&(t.amount=4*t.amount),"daily"==i&&(t.amount=30*t.amount),e.push(t)})),e}calculate_from_normalized(t,e){var i=[];return t.forEach((t=>{var n=e.toLowerCase();"bi-weekly"==n&&(t.amount=Math.ceil(t.amount/2)),"weekly"==n&&(t.amount=Math.ceil(t.amount/4)),"daily"==n&&(t.amount=Math.ceil(t.amount/30)),i.push(t)})),i}calculate_finances(t){return console.log(t),new Promise((e=>{window.API2.get_db("finances").find({},((i,n)=>{e(this.calculate_from_normalized(this.normalize_finances(n),t))}))}))}calculate_montly_expenses(){return new Promise((t=>{window.API2.get_db("finances").find({},((e,i)=>{var n=0;i.forEach((t=>{var e=Number(t.amount);isNaN(e)||"income"===t.type||(n+=e)})),t(n)}))}))}calculate_montly_incomes(){return new Promise((t=>{window.API2.get_db("finances").find({},((e,i)=>{var n=0;i.forEach((t=>{var e=Number(t.amount);isNaN(e)||"expense"===t.type||(n+=e)})),t(n)}))}))}calculate_total_expenses(){return new Promise((t=>{this.calculate_montly_expenses().then((e=>{this.calculate_montly_incomes().then((i=>{var n=isNaN(Number(document.getElementById("saving").value))?0:document.getElementById("saving");t(Number(i-(e+n)))}))}))}))}append_total_calculations(){this.calculate_total_expenses().then((t=>{var e=-1==Math.sign(t)?"-":"+",i=-1==Math.sign(t)?"#e3556c":"green",n=String(t),s=-1==Math.sign(t)?Number(n.slice(1,n.length)):n;document.getElementById("income").innerHTML+=`<center><h1 style='color:${i} !important;' ">${e}    $${s}</h1></center>`}))}bar_graph(){var t=document.createElement("card-item");return t.style.height="40px",t}}),window.customElements.define("new-expense-view",class extends o{constructor(){super()}connectedCallback(){this.classList.add("view"),this.innerHTML='   <p>Name</p>\n                                        <custom-input id="name" type="text" placeholder="Name"></custom-input>\n                                        <p>Frequency</p>\n                                        <custom-input id="dropdown" type="dropdown" text="Frequency" icon="info" ></custom-input>\n                                        <p>Amount</p>\n                                        <custom-input id="amount" type="text" icon="attach_money" placeholder="Amount" number></custom-input>\n                                        <p>Description</p>\n                                        <custom-input id="description" type="textarea" placeholder="Description" rows="10"></custom-input>\n                                        <custom-input id="save" type="button" icon="save" text="Save"></custom-input>\n                                        ',document.getElementById("dropdown").items=["Monthly","Weekly","Bi-Weekly"],window.DP.dispatch("VIEW_LOAD"),document.getElementById("save").onclick=()=>{this.save()}}save(){var t=document.getElementById("name").value,e=document.getElementById("dropdown").value,i=document.getElementById("amount").value,n=(document.getElementById("description").value,null!=t?t:null),s=null!=e?e:null,o=null!=i?i:null;null!==n&&null!==s&&null!==o&&window.API2.dbs.finances.insert({type:"expense",name:n,amount:o,frequency:s})}}),window.customElements.define("new-finance-item-view",class extends o{constructor(){super()}connectedCallback(){this.classList.add("view"),this.profiles=[],this.create_view();var t=window.location.href.split("/");if(this.item_id=t.length>=6?t[t.length-1]:null,t.length>=6){var e=window.Builder.createElement("custom-input",{type:"button",icon:"remove",text:"Delete"});e.onclick=()=>{window.API2.dbs.finances.remove({_id:this.item_id}),windowo.history.back()},this.append(e),window.API2.dbs.finances.find({_id:this.item_id},((t,e)=>{var i=e[0];this.name.textContent=i.name,this.name.value=i.name,this.type.value=i.type,this.frequency.value=i.frequency,this.amount.value=i.amount,this.amount.textContent=i.amount}))}window.API2.get_db("profiles").find({},((t,e)=>{e.forEach((t=>{this.profiles.push(t.name)}))})),this.frequency.items=["Monthly","Weekly","Bi-Weekly","Daily"],this.type.items=["Income","Expense"],window.DP.dispatch("VIEW_LOAD")}create_view(){var t=window.Builder.createElement("custom-text",{text:"Profile",width:"4",color:"var(--theme-text-primary-color)",align:"center"},{height:"30px"});this.profile=window.Builder.createElement("custom-input",{type:"dropdown",icon:"info",text:"Profile",width:"4"});var e=window.Builder.createElement("custom-text",{text:"Name",color:"var(--theme-text-primary-color)",width:"8",align:"center"},{height:"30px"});this.name=window.Builder.createElement("custom-input",{type:"text",placeholder:"Name",width:"8"});var i=window.Builder.createElement("custom-text",{text:"Type",width:"6",align:"center",color:"var(--theme-text-primary-color)"},{height:"30px"}),n=window.Builder.createElement("custom-text",{text:"Frequency",width:"6",align:"center",color:"var(--theme-text-primary-color)"},{height:"30px"});this.type=window.Builder.createElement("custom-input",{type:"dropdown",icon:"info",text:"Type",width:"6"}),this.frequency=window.Builder.createElement("custom-input",{type:"dropdown",icon:"info",text:"Frequency",width:"6"});var s=window.Builder.createElement("custom-text",{text:"Amount",color:"var(--theme-text-primary-color)"},{height:"30px"});this.amount=window.Builder.createElement("custom-input",{type:"text",placeholder:"Amount"}),this.description=window.Builder.createElement("custom-input",{type:"textarea",rows:"10",placeholder:"Description"}),this.save=window.Builder.createElement("custom-input",{type:"button",icon:"save",text:"Save"});var o=[];window.API2.get_db("profiles").find({},((t,e)=>{e.forEach((t=>{o.push(t.name)}))})),this.save.onclick=()=>{this.save_to_db()},this.append(e,t,this.name,this.profile,i,n,this.type,this.frequency,s,this.amount,this.description,this.save),this.profile.items=o}save_to_db(){var t=this.name.value,e=this.frequency.value,i=this.amount.value,n=(this.value,this.type.value),s=null!=t?t:null,o=null!=e?e:null,a=null!=i?i:null,r=null!=n?n:null;if(null!==s&&null!==o&&null!==a&&null!==r){var l=window.API2.dbs.finances;console.log(this.item_id),l.findOne({_id:this.item_id},((t,e)=>{e?window.API2.dbs.finances.update({_id:this.item_id},{$set:{type:r.toLowerCase(),name:s,amount:a,frequency:o}}):window.API2.dbs.finances.insert({type:r.toLowerCase(),name:s,amount:a,frequency:o}),window.history.back()}))}}}),window.customElements.define("new-profile-view",class extends o{constructor(){super()}connectedCallback(){this.classList.add("view"),this.create_view(),window.DP.dispatch("VIEW_LOAD")}create_view(){var t=window.Builder.createElement("custom-text",{text:"Name",color:"var(--theme-text-primary-color)"},{height:"30px"});this.name=window.Builder.createElement("custom-input",{type:"text",placeholder:"Name"}),this.description=window.Builder.createElement("custom-input",{type:"textarea",rows:"10",placeholder:"Description"}),this.save=window.Builder.createElement("custom-input",{type:"button",icon:"save",text:"Save"}),this.save.onclick=()=>{this.save_to_db()},this.append(t,this.name,this.description,this.save)}save_to_db(){var t=this.name.value,e=this.description.value,i=null!=t?t:null,n=null!=e?e:null;null!==i&&null!==n&&window.API2.dbs.profiles.insert({name:i,description:n},((t,e)=>{window.history.back()}))}});const h=new class{constructor(){this.events=[]}on(t,e){return"function"!=typeof e?(console.error("The listener callback must be a function, the given type is "+typeof e),!1):"string"!=typeof t?(console.error("The event name must be a string, the given type is "+typeof t),!1):(void 0===this.events[t]&&(this.events[t]={listeners:[]}),void this.events[t].listeners.push(e))}removeListener(t,e){if(void 0===this.events[t])return console.error(`This event: ${t} does not exist`),!1;this.events[t].listeners=this.events[t].listeners.filter((t=>t.toString()!==e.toString()))}dispatch(t,e){if(void 0===this.events[t])return console.error(`This event: ${t} does not exist`),!1;this.events[t].listeners.forEach((t=>{t(e)}))}};window.DP=h,window.DP;var u=[];function m(t,e,i){return new Promise((n=>{var s={method:i,headers:{"Content-Type":"application/json"}};"POST"==i&&(s.body=JSON.stringify(e)),fetch(`${t}`,s).then((t=>t.json())).then((t=>{n(t)}))}))}setTimeout((()=>{window.DP.dispatch("API_LOAD")}),50);const p={get dbs(){return u},get_db:t=>u[t],getCookie:t=>function(t){let e=t+"=",i=document.cookie.split(";");for(let t=0;t<i.length;t++){let n=i[t];for(;" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(e))return n.substring(e.length,n.length)}return""}(t),setCookie(t,e){!function(t,e,i){const n=new Date;n.setTime(n.getTime()+NaN);let s="expires="+n.toUTCString();document.cookie=t+"="+e+";"+s+";path=/"}(t,e)},reloadAPI(){reloadAPI()},uniqid:(t="",e=!1)=>`${t}${(1e3*Date.now()+1e3*Math.random()).toString(16).replace(/\./g,"").padEnd(14,"0")}${e?`.${Math.trunc(1e8*Math.random())}`:""}`,in_array(t,e){for(var i in e)if(e[i]=t)return!0;return!1},remote_log(t,e){m("/API/remote_log",{title:t,data:e},"POST").then((t=>{}))},register_service_worker(){console.log("service worker registration"),"serviceWorker"in navigator&&navigator.serviceWorker.register("/worker").then((function(t){console.log("ServiceWorker registration successful with scope: ",t.scope)}),(function(t){console.log("ServiceWorker registration failed: ",t)}))},getMobileOperatingSystem(){return t=navigator.userAgent||navigator.vendor||window.opera,/windows phone/i.test(t)?"Windows Phone":/android/i.test(t)?"Android":/iPad|iPhone|iPod/.test(t)&&!window.MSStream?"iOS":"unknown";var t},toggle_array:(t,e)=>function(t,e){var i=t,n=[e];return 0==t.length?(i.push(e),i):(t.includes(e)?i=i.filter((t=>!n.includes(t))):i.push(e),i)}(t,e),evaluate:t=>new Promise((e=>{(function(t){return new Promise((e=>{encodeURIComponent(t),m("http://api.mathjs.org/v4",{expr:t},"POST").then((t=>{console.log(t),e(t)}))}))})(t).then((t=>{e(t)}))})),new_db(t){!function(t){u[t]=new Nedb({filename:`${t}.db`,autoload:!0})}(t)}};window.API2=p,window.API2;var _=document.getElementsByTagName("main-content")[0],g={},w=location.href;function y(t){document.getElementsByTagName("title")[0].textContent=t}function b(t){var e,i;if(1==t.length)g[t[0]]?(e=g[t[0]].view,y(i=g[t[0]].title)):window.history.back();else{for(var n,s=g[t[0]],o=[],a=0;a<t.length;a++)n=s,s=0==a?n:null==s?o[1].subViews["*"].subViews[t[a]]:s.subViews[t[a]],o.push(s);null==s?n.subViews["*"]?(e=n.subViews["*"].view,i=n.subViews["*"].title):n.subViews["*"]||window.history.back():(e=s.view,i=s.title)}y(i),_.innerHTML=e,function(t){window.localStorage.lastView=t}(e),"iOS"==window.API2.getMobileOperatingSystem()&&1==window.navigator.standalone&&(document.body.style.paddingTop="40px",_.style.marginTop="40px")}function v(){w=location.href,setInterval((function(){w!=location.href&&(k(),window.loadingSpinner.show(),w=location.href,f(2),E())}),100)}function f(t){for(var e=w.slice(w.indexOf("/")+1,w.length).split("/"),i=[],n=t;n<e.length;n++)i.push(e[n]);b(i)}function x(){document.getElementsByClassName("view")[0].resizeComponents()}function E(){_.style.left=`calc(50% - ${window.VM.main_content_div.offsetWidth/2}px)`,_.style.transition="ease-in .2s",_.style["-webkit-transition"]="ease-in .2s"}function k(){_.style.left="100%",_.style.transition="",_.style["-webkit-transition"]=""}const L={main_content_div:_,global_el_division:12,current_view:void 0,context_menu:document.getElementsByTagName("context-menu")[0],get routes(){return g},register(t){g=t,console.log(g)},_setView(t,e){b(t)},_URL_LISTENER(){v()},get_view_from_url(){f(2)},set_title(t){y(t)},set_theme_property(t,e){!function(t,e){document.documentElement.style.setProperty(t,e)}(t,e)},add_bottom_button(t,e){!function(t,e){bottom_nav_bar.add_item(t,e)}(t,e)},begin(){v(),f(2),E(),window.onresize=()=>{x()}},resize_components(){x()},focus_view(){E()},unfocus_view(){k()},getDataContainers:()=>function(t){var e=_.getElementsByTagName("*"),i=[];if(e.length<=0)return!1;for(var n=0;n<e.length;n++){if(e[n].hasAttribute("data_content")){var s=e[n].getAttribute("data_content");i[s]={...i[s],...[e[n]]}}if(n==e.length-1)return i}}()};window.VM=L,window.VM,HTMLElement;const T={daily_schedule_row_item(t,e){var i=window.Utils.format_time(t.start_time),n=window.Utils.format_time(t.end_time);console.log(e);var s=null!=e?e:"var(--theme-background-color)";return`\n        <card-item width="4" style="max-height:37px; background:${s};">\n            <p style="padding:0; margin:0; margin-bottom:10px; color:${t.color};text-align:center; font-size: 14px;">${t.name}</p>\n        </card-item>\n        <card-item width="3" style="max-height:37px; background:${s};">\n            <p style="padding:0; margin:0; margin-bottom:10px; color:${t.color};text-align:center; font-size: 14px;">${i}</p>\n        </card-item>\n        <card-item width="3" style="max-height:37px; background:${s};">\n            <p style="padding:0;  margin:0;margin-bottom:10px; color:${t.color};text-align:center; font-size: 14px;">${n}</p>\n        </card-item>\n        <card-item width="2" style="max-height:37px; background:${s};">\n            <span class="material-icons" style="margin:0; margin-left:50%; left:-7px; font-size:14px; position:relative; margin-bottom:10px;color:var(--theme-primary-color);">\n            info\n            </span>\n        </card-item>`},big_pie_chart_card:()=>'<card-item width="12">\n                            <card-item width="6" blank>\n                                <pie-chart></pie-chart>\n                            </card-item>\n                            <card-item width="6" blank>\n                                <custom-input style="background:var(--theme-background-color);" type="button" icon="info" text="Event Type"></custom-input>\n                                <custom-input style="background:var(--theme-background-color);" type="button" icon="info" text="Event Time"></custom-input>\n                                <custom-input style="background:var(--theme-background-color);" type="button" icon="info" text="Event Day"></custom-input>\n                                <custom-input style="background:var(--theme-background-color);" type="button" icon="info" text="test"></custom-input>\n                            </card-item>\n                        </card-item>',square_card_item:(t,e,i)=>'   <card-item width="'+(i||4)+`" square>\n                                <h1 style="margin:0; width:100%; float:left; position:absolute; text-align:center; height:40px; font-size:40px; margin-top:50%; top:-30px; color:var(--theme-primary-color);">${t}</h1>\n                                <p style="margin:0; width:100%; text-align:center; float:left; position:absolute; bottom:var(--global-margin);">${e}</p>\n                            </card-item>`,createElement(t,e,i){var n=document.createElement(t);for(var s in e)n.setAttribute(s,e[s]);for(var s in i)n.style[s]=i[s];return n}};window.Builder=T,window.Builder;const A={format_time(t){if(t.length>3)var e=t.slice(0,2),i=t.slice(2,4);else e=t.slice(0,1),i=t.slice(1,3);return e>12?String(e-12).concat(":",i," PM"):String(e).concat(":",i," AM")},nth(t){if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}};window.Utils=A,window.Utils,new Nedb({filename:"filesystem.db",autoload:!0});const C={mkdir(){}};window.FS=C,window.FS;const M={windows:[],new_window(t){document.body.append(new d(t))}};window.WM=M;const B={activities:[],WindowManager:window.WM};window.ActivityManager=B,window.ActivityManager,window.onload=()=>{window.API2.register_service_worker();var t=new c,e=new l,i=new s,n=window.Builder.createElement("custom-input",{type:"button",text:"New Shortcut",icon:"info",nomargin:!0},{borderRadius:"0px",margin:"0px",height:"30px",lineHeight:"30px",fontSize:"7px"});n.onclick=t=>{window.ActivityManager.WindowManager.new_window({title:"test",width:"400px",height:"250px",x:"50px",y:"50px",context_items:n,html:'<custom-input type="button" icon="info" text="test"></custom-input'})},document.body.context_html=n,document.body.append(t,e,i),window.DP.on("VIEW_LOAD",(()=>{console.log("VIEW LOAD"),window.VM.resize_components(),window.loadingSpinner.hide()})),window.DP.on("API_LOAD",(()=>{console.log("API LOAD")})),window.DP.on("NO_AUTH",(()=>{})),window.addEventListener("contextmenu",(t=>{t.preventDefault();var e=null!=t.target.context_html?t.target.context_html:"";i.show(t.pageX,t.pageY,e)}))}})();